{"version":3,"sources":["user-compiled-compiled-compiled.js"],"names":[],"mappings":"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","file":"user-compiled-compiled-compiled-compiled.js","sourcesContent":["'use strict';\n\nvar genToken = function () {\n    var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(user) {\n        var myToken, db, update;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n                switch (_context.prev = _context.next) {\n                    case 0:\n                        _context.next = 2;\n                        return _jsonwebtoken2.default.sign({ username: user.login }, _credentials2.default.jwtSecret);\n\n                    case 2:\n                        myToken = _context.sent;\n                        _context.next = 5;\n                        return dbl.connect();\n\n                    case 5:\n                        db = _context.sent;\n                        _context.prev = 6;\n                        _context.next = 9;\n                        return db.collection('users').updateOne({ login: user.login }, { $set: { token: myToken } });\n\n                    case 9:\n                        update = _context.sent;\n\n                        if (!(update.modifiedCount == 1)) {\n                            _context.next = 16;\n                            break;\n                        }\n\n                        user.token = myToken;\n\n                        console.log(user.login + \" connected: \" + now());\n                        return _context.abrupt('return', user);\n\n                    case 16:\n                        console.error(_errno_code2.default.TOKEN_ERROR + user.login);\n                        user.success = false;\n                        user.message = _errno_code2.default.TOKEN_ERROR;\n                        return _context.abrupt('return', user);\n\n                    case 20:\n                        _context.next = 28;\n                        break;\n\n                    case 22:\n                        _context.prev = 22;\n                        _context.t0 = _context['catch'](6);\n\n                        console.error(_context.t0);\n                        user.success = false;\n                        user.message = _errno_code2.default.TOKEN_ERROR;\n                        return _context.abrupt('return', user);\n\n                    case 28:\n                        _context.prev = 28;\n\n                        db.close();\n                        return _context.finish(28);\n\n                    case 31:\n                    case 'end':\n                        return _context.stop();\n                }\n            }\n        }, _callee, this, [[6, 22, 28, 31]]);\n    }));\n\n    return function genToken(_x) {\n        return _ref.apply(this, arguments);\n    };\n}();\n\nvar addFingerprint = function () {\n    var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(user, fingerprint) {\n        var db;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n                switch (_context2.prev = _context2.next) {\n                    case 0:\n                        _context2.next = 2;\n                        return dbl.connect();\n\n                    case 2:\n                        db = _context2.sent;\n                        _context2.prev = 3;\n\n                        db.collection('users').updateOne({ login: user.login }, { $push: { fingerprint: fingerprint } });\n                        user.fingerprint = fingerprint;\n                        return _context2.abrupt('return', user);\n\n                    case 9:\n                        _context2.prev = 9;\n                        _context2.t0 = _context2['catch'](3);\n\n                        console.error(_context2.t0);\n\n                    case 12:\n                    case 'end':\n                        return _context2.stop();\n                }\n            }\n        }, _callee2, this, [[3, 9]]);\n    }));\n\n    return function addFingerprint(_x2, _x3) {\n        return _ref2.apply(this, arguments);\n    };\n}();\n\nvar basicAuth = function () {\n    var _ref3 = _asyncToGenerator(regeneratorRuntime.mark(function _callee5(login, password, fingerprint, callback) {\n        var db;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n                switch (_context5.prev = _context5.next) {\n                    case 0:\n                        _context5.next = 2;\n                        return dbl.connect();\n\n                    case 2:\n                        db = _context5.sent;\n                        _context5.prev = 3;\n                        _context5.next = 6;\n                        return _asyncToGenerator(regeneratorRuntime.mark(function _callee4() {\n                            var user;\n                            return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                                while (1) {\n                                    switch (_context4.prev = _context4.next) {\n                                        case 0:\n                                            _context4.next = 2;\n                                            return db.collection('users').findOne({ $or: [{ login: login, active: true }, { email: login, active: true }] });\n\n                                        case 2:\n                                            user = _context4.sent;\n\n                                            try {\n                                                db.close();\n                                                if (!user) {\n                                                    callback({ success: false, message: _errno_code2.default.AUTH_ERROR }, {\n                                                        auth: {\n                                                            success: false,\n                                                            message: _errno_code2.default.AUTH_ERROR\n                                                        }\n                                                    });\n                                                } else {\n                                                    _bcrypt2.default.compare(password, user.password, function () {\n                                                        var _ref5 = _asyncToGenerator(regeneratorRuntime.mark(function _callee3(err, res) {\n                                                            var ret, _ret2, _ret3;\n\n                                                            return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                                                                while (1) {\n                                                                    switch (_context3.prev = _context3.next) {\n                                                                        case 0:\n                                                                            if (!res) {\n                                                                                _context3.next = 8;\n                                                                                break;\n                                                                            }\n\n                                                                            _context3.next = 3;\n                                                                            return genToken(user);\n\n                                                                        case 3:\n                                                                            user = _context3.sent;\n\n                                                                            console.log(\"Token received\");\n                                                                            if (user.fingerprint && contains(user.fingerprint, fingerprint)) {\n                                                                                ret = {\n                                                                                    auth: {\n                                                                                        method: \"basic\",\n                                                                                        success: true,\n                                                                                        fingerprint: fingerprint,\n                                                                                        token: user.token,\n                                                                                        message: _errno_code2.default.LOGIN_SUCCESS_INFO\n                                                                                    }\n                                                                                };\n\n                                                                                callback(err, ret);\n                                                                            } else {\n                                                                                console.log(\"New fingerprint will be added to user profile\");\n                                                                                user = addFingerprint(user, fingerprint);\n                                                                                _ret2 = {\n                                                                                    auth: {\n                                                                                        method: \"basic\",\n                                                                                        success: true,\n                                                                                        fingerprint: fingerprint,\n                                                                                        token: user.token,\n                                                                                        message: _errno_code2.default.LOGIN_SUCCESS_INFO\n                                                                                    }\n                                                                                };\n\n                                                                                callback(err, _ret2);\n                                                                            }\n                                                                            _context3.next = 11;\n                                                                            break;\n\n                                                                        case 8:\n                                                                            console.log(\"wrong password\");\n                                                                            _ret3 = {\n                                                                                auth: {\n                                                                                    method: \"basic\",\n                                                                                    success: false,\n                                                                                    fingerprint: fingerprint,\n                                                                                    message: _errno_code2.default.AUTH_PASSWORD_ERROR\n                                                                                }\n                                                                            };\n\n                                                                            callback(err, _ret3);\n\n                                                                        case 11:\n                                                                        case 'end':\n                                                                            return _context3.stop();\n                                                                    }\n                                                                }\n                                                            }, _callee3, this);\n                                                        }));\n\n                                                        return function (_x8, _x9) {\n                                                            return _ref5.apply(this, arguments);\n                                                        };\n                                                    }());\n                                                }\n                                            } catch (err) {\n                                                callback(err, false);\n                                            }\n\n                                        case 4:\n                                        case 'end':\n                                            return _context4.stop();\n                                    }\n                                }\n                            }, _callee4, this);\n                        }))();\n\n                    case 6:\n                        _context5.next = 11;\n                        break;\n\n                    case 8:\n                        _context5.prev = 8;\n                        _context5.t0 = _context5['catch'](3);\n\n                        console.error(_context5.t0);\n\n                    case 11:\n                    case 'end':\n                        return _context5.stop();\n                }\n            }\n        }, _callee5, this, [[3, 8]]);\n    }));\n\n    return function basicAuth(_x4, _x5, _x6, _x7) {\n        return _ref3.apply(this, arguments);\n    };\n}();\n\nvar tokenAuth = function () {\n    var _ref6 = _asyncToGenerator(regeneratorRuntime.mark(function _callee6(token, fingerprint, callback) {\n        var db, login, user, ret, _ret4, _ret5, _ret6;\n\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n            while (1) {\n                switch (_context6.prev = _context6.next) {\n                    case 0:\n                        _context6.next = 2;\n                        return dbl.connect();\n\n                    case 2:\n                        db = _context6.sent;\n                        login = _jsonwebtoken2.default.verify(token, _credentials2.default.jwtSecret).username;\n\n                        console.log(\"token auth for user: \" + login);\n                        _context6.prev = 5;\n                        _context6.next = 8;\n                        return db.collection('users').findOne({ login: login, active: true });\n\n                    case 8:\n                        user = _context6.sent;\n\n                        if (!user) {\n                            ret = {\n                                auth: {\n                                    method: \"token\",\n                                    success: false,\n                                    fingerprint: fingerprint,\n                                    message: _errno_code2.default.AUTH_ERROR } };\n\n                            callback(true, ret);\n                        } else if (user.fingerprint && contains(user.fingerprint, fingerprint)) {\n                            _ret4 = {\n                                auth: {\n                                    method: \"token\",\n                                    success: true,\n                                    fingerprint: fingerprint,\n                                    message: _errno_code2.default.LOGIN_SUCCESS_INFO } };\n\n                            callback(false, _ret4);\n                        } else {\n                            _ret5 = {\n                                auth: {\n                                    method: \"token\",\n                                    success: true,\n                                    fingerprint: false,\n                                    message: _errno_code2.default.AUTH_DEVICE_ERROR } };\n\n                            callback(true, _ret5);\n                        }\n                        _context6.next = 16;\n                        break;\n\n                    case 12:\n                        _context6.prev = 12;\n                        _context6.t0 = _context6['catch'](5);\n                        _ret6 = {\n                            auth: {\n                                method: \"token\",\n                                success: false,\n                                fingerprint: fingerprint,\n                                message: _errno_code2.default.AUTH_ERROR } };\n\n                        callback(_context6.t0, _ret6);\n\n                    case 16:\n                        _context6.prev = 16;\n\n                        db.close();\n                        return _context6.finish(16);\n\n                    case 19:\n                    case 'end':\n                        return _context6.stop();\n                }\n            }\n        }, _callee6, this, [[5, 12, 16, 19]]);\n    }));\n\n    return function tokenAuth(_x10, _x11, _x12) {\n        return _ref6.apply(this, arguments);\n    };\n}();\n\nvar userLogin = function () {\n    var _ref7 = _asyncToGenerator(regeneratorRuntime.mark(function _callee7(req, res) {\n        var token;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n            while (1) {\n                switch (_context7.prev = _context7.next) {\n                    case 0:\n                        token = req.headers.authorization.match(/^Bearer (.*)$/)[1];\n                        _context7.next = 3;\n                        return authenticate(req.body.login, req.body.password, token, req.body.fingerprint, function (err, ret) {\n                            if (err || ret.auth.fingerprint == false) {\n                                console.error(err);\n                                res.setHeader('Content-Type', 'application/json');\n                                res.send(JSON.stringify(ret));\n                            } else {\n                                res.setHeader('Content-Type', 'application/json');\n                                res.send(JSON.stringify(ret));\n                            }\n                        });\n\n                    case 3:\n                    case 'end':\n                        return _context7.stop();\n                }\n            }\n        }, _callee7, this);\n    }));\n\n    return function userLogin(_x13, _x14) {\n        return _ref7.apply(this, arguments);\n    };\n}();\n\nvar authenticate = function () {\n    var _ref8 = _asyncToGenerator(regeneratorRuntime.mark(function _callee8(login, password, token, fingerprint, callback) {\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n            while (1) {\n                switch (_context8.prev = _context8.next) {\n                    case 0:\n                        //This method authenticates user using basic strategy (username and password) or token based strategy.\n                        //The first strategy uses Bcrypt to hash and salt the password.\n                        //The latter uses JWT to validate the token.\n                        //In any case, if a token doesn't exist, one is generated upon authentication success.\n                        //After authenticating, if the device fingerprint isn't recognized, user will be required to confirm his identity\n                        // using email.\n                        //This function fires a callback when succeeding, this callback takes two arguments: err: boolean and ret: object\n                        // containing every info about the authentication and its eventual success, if such, user info and details about\n                        // device fingerprint status.\n\n                        console.log(\"Connection attempt from: \" + login + ' (token: ' + token + ')');\n                        if (token && fingerprint) {\n                            tokenAuth(token, fingerprint, callback);\n                        } else if (login && password && fingerprint) {\n                            basicAuth(login, password, fingerprint, callback);\n                        } else {\n                            callback({ message: _errno_code2.default.AUTH_ERROR }, { auth: { success: false, message: _errno_code2.default.AUTH_ERROR } });\n                        }\n\n                    case 2:\n                    case 'end':\n                        return _context8.stop();\n                }\n            }\n        }, _callee8, this);\n    }));\n\n    return function authenticate(_x15, _x16, _x17, _x18, _x19) {\n        return _ref8.apply(this, arguments);\n    };\n}();\n\nvar checkLogin = function () {\n    var _ref9 = _asyncToGenerator(regeneratorRuntime.mark(function _callee9(req, res, next) {\n        var test;\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n            while (1) {\n                switch (_context9.prev = _context9.next) {\n                    case 0:\n                        _context9.prev = 0;\n                        _context9.next = 3;\n                        return checkLoginHlp(req.params.login);\n\n                    case 3:\n                        test = _context9.sent;\n\n                        res.setHeader('Content-Type', 'application/json');\n                        res.send(JSON.stringify(test));\n                        _context9.next = 11;\n                        break;\n\n                    case 8:\n                        _context9.prev = 8;\n                        _context9.t0 = _context9['catch'](0);\n\n                        next(_context9.t0);\n\n                    case 11:\n                    case 'end':\n                        return _context9.stop();\n                }\n            }\n        }, _callee9, this, [[0, 8]]);\n    }));\n\n    return function checkLogin(_x20, _x21, _x22) {\n        return _ref9.apply(this, arguments);\n    };\n}();\n\nvar checkLoginHlp = function () {\n    var _ref10 = _asyncToGenerator(regeneratorRuntime.mark(function _callee10(login) {\n        var db, collection, userCount;\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n            while (1) {\n                switch (_context10.prev = _context10.next) {\n                    case 0:\n                        _context10.next = 2;\n                        return dbl.connect();\n\n                    case 2:\n                        db = _context10.sent;\n                        _context10.prev = 3;\n                        collection = db.collection('users');\n                        _context10.next = 7;\n                        return collection.find({\n                            login: login\n                        }).limit(1).count();\n\n                    case 7:\n                        userCount = _context10.sent;\n\n                        if (!(userCount == 0 && !/([ ])/.exec(login))) {\n                            _context10.next = 13;\n                            break;\n                        }\n\n                        console.log(\"Login \" + login + \" is valid\");\n                        return _context10.abrupt('return', { valid: true, message: \"Login \" + login + \" is available\", login: login });\n\n                    case 13:\n                        if (!/([ ])/.exec(login)) {\n                            _context10.next = 18;\n                            break;\n                        }\n\n                        console.log(\"Login \" + login + \" is not valid\");\n                        return _context10.abrupt('return', { valid: false, message: \"Login \" + login + \" contains whitespace\", login: login });\n\n                    case 18:\n                        console.log(\"Login \" + login + \" is not valid\");\n                        return _context10.abrupt('return', { valid: false, message: \"Login \" + login + \" isn't available\", login: login });\n\n                    case 20:\n                        _context10.prev = 20;\n\n                        db.close();\n                        return _context10.finish(20);\n\n                    case 23:\n                    case 'end':\n                        return _context10.stop();\n                }\n            }\n        }, _callee10, this, [[3,, 20, 23]]);\n    }));\n\n    return function checkLoginHlp(_x23) {\n        return _ref10.apply(this, arguments);\n    };\n}();\n\nvar checkEmailHlp = function () {\n    var _ref11 = _asyncToGenerator(regeneratorRuntime.mark(function _callee11(email) {\n        var db, collection, userCount;\n        return regeneratorRuntime.wrap(function _callee11$(_context11) {\n            while (1) {\n                switch (_context11.prev = _context11.next) {\n                    case 0:\n                        _context11.next = 2;\n                        return dbl.connect();\n\n                    case 2:\n                        db = _context11.sent;\n                        _context11.prev = 3;\n                        collection = db.collection('users');\n\n                        console.log(collection);\n                        _context11.next = 8;\n                        return collection.find({\n                            email: email\n                        }).limit(1).count();\n\n                    case 8:\n                        userCount = _context11.sent;\n\n                        if (!(userCount == 0 && email.match(/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/ig))) {\n                            _context11.next = 14;\n                            break;\n                        }\n\n                        console.log(\"Email \" + email + \" is valid\");\n                        return _context11.abrupt('return', { valid: true, message: \"Email \" + email + \" is available\", email: email });\n\n                    case 14:\n                        if (!(userCount == 0)) {\n                            _context11.next = 19;\n                            break;\n                        }\n\n                        console.log(\"Email \" + email + \" is not valid\");\n                        return _context11.abrupt('return', { valid: false, error: 1, message: \"Email \" + email + \" is incorrect\", email: email });\n\n                    case 19:\n                        console.log(\"Email \" + email + \" is not valid\");\n                        return _context11.abrupt('return', { valid: false, error: 2, message: \"A profile already exists for \" + email, email: email });\n\n                    case 21:\n                        _context11.prev = 21;\n\n                        db.close();\n                        return _context11.finish(21);\n\n                    case 24:\n                    case 'end':\n                        return _context11.stop();\n                }\n            }\n        }, _callee11, this, [[3,, 21, 24]]);\n    }));\n\n    return function checkEmailHlp(_x24) {\n        return _ref11.apply(this, arguments);\n    };\n}();\n\nvar checkEmail = function () {\n    var _ref12 = _asyncToGenerator(regeneratorRuntime.mark(function _callee12(req, res) {\n        var test;\n        return regeneratorRuntime.wrap(function _callee12$(_context12) {\n            while (1) {\n                switch (_context12.prev = _context12.next) {\n                    case 0:\n                        _context12.prev = 0;\n                        _context12.next = 3;\n                        return checkEmailHlp(req.params.email);\n\n                    case 3:\n                        test = _context12.sent;\n\n                        res.setHeader('Content-Type', 'application/json');\n                        res.send(JSON.stringify(test));\n                        _context12.next = 11;\n                        break;\n\n                    case 8:\n                        _context12.prev = 8;\n                        _context12.t0 = _context12['catch'](0);\n\n                        console.error(_context12.t0);\n\n                    case 11:\n                    case 'end':\n                        return _context12.stop();\n                }\n            }\n        }, _callee12, this, [[0, 8]]);\n    }));\n\n    return function checkEmail(_x25, _x26) {\n        return _ref12.apply(this, arguments);\n    };\n}();\n\nvar checkPass = function () {\n    var _ref13 = _asyncToGenerator(regeneratorRuntime.mark(function _callee13(pass1, pass2) {\n        var _password;\n\n        return regeneratorRuntime.wrap(function _callee13$(_context13) {\n            while (1) {\n                switch (_context13.prev = _context13.next) {\n                    case 0:\n                        if (!(pass1 === pass2 && pass1.match(/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,48}$/))) {\n                            _context13.next = 8;\n                            break;\n                        }\n\n                        console.log(\"Password \" + pass1 + \" is valid\");\n                        _context13.next = 4;\n                        return _bcrypt2.default.hashSync(pass1, saltRounds);\n\n                    case 4:\n                        _password = _context13.sent;\n                        return _context13.abrupt('return', { valid: true, message: \"Valid password\", password: _password });\n\n                    case 8:\n                        console.log(\"Password \" + pass1 + \" is not valid\");\n                        return _context13.abrupt('return', { valid: false, message: _errno_code2.default.PASSWORD_FORMAT_ERROR });\n\n                    case 10:\n                    case 'end':\n                        return _context13.stop();\n                }\n            }\n        }, _callee13, this);\n    }));\n\n    return function checkPass(_x27, _x28) {\n        return _ref13.apply(this, arguments);\n    };\n}();\n\nvar changePasswordHlp = function () {\n    var _ref14 = _asyncToGenerator(regeneratorRuntime.mark(function _callee15(token, password) {\n        var returnValue;\n        return regeneratorRuntime.wrap(function _callee15$(_context15) {\n            while (1) {\n                switch (_context15.prev = _context15.next) {\n                    case 0:\n                        returnValue = null;\n                        _context15.next = 3;\n                        return _jsonwebtoken2.default.verify(token, _credentials2.default.jwtSecret, function () {\n                            var _ref15 = _asyncToGenerator(regeneratorRuntime.mark(function _callee14(err, ret) {\n                                var password2, _email, db, update;\n\n                                return regeneratorRuntime.wrap(function _callee14$(_context14) {\n                                    while (1) {\n                                        switch (_context14.prev = _context14.next) {\n                                            case 0:\n                                                console.log(err.message);\n\n                                                if (!err) {\n                                                    _context14.next = 5;\n                                                    break;\n                                                }\n\n                                                returnValue = { success: false, message: 'token is corrupted' };\n                                                _context14.next = 16;\n                                                break;\n\n                                            case 5:\n                                                _context14.next = 7;\n                                                return _bcrypt2.default.hashSync(password, saltRounds);\n\n                                            case 7:\n                                                password2 = _context14.sent;\n                                                _email = ret.email;\n                                                _context14.next = 11;\n                                                return dbl.connect();\n\n                                            case 11:\n                                                db = _context14.sent;\n                                                _context14.next = 14;\n                                                return db.collection('users').updateOne({ email: _email }, { $set: { password: password2 } });\n\n                                            case 14:\n                                                update = _context14.sent;\n\n                                                try {\n                                                    if (update.modifiedCount == 1) {\n                                                        returnValue = { success: true, message: \"Password updated successfully\" };\n                                                    } else {\n                                                        returnValue = { success: false, message: \"An error happened while updating the password\" };\n                                                    }\n                                                } catch (err) {\n                                                    returnValue = { success: false, message: \"Database error\" };\n                                                } finally {\n                                                    db.close();\n                                                }\n\n                                            case 16:\n                                            case 'end':\n                                                return _context14.stop();\n                                        }\n                                    }\n                                }, _callee14, this);\n                            }));\n\n                            return function (_x31, _x32) {\n                                return _ref15.apply(this, arguments);\n                            };\n                        }());\n\n                    case 3:\n                        return _context15.abrupt('return', returnValue);\n\n                    case 4:\n                    case 'end':\n                        return _context15.stop();\n                }\n            }\n        }, _callee15, this);\n    }));\n\n    return function changePasswordHlp(_x29, _x30) {\n        return _ref14.apply(this, arguments);\n    };\n}();\n\nvar changePassword = function () {\n    var _ref16 = _asyncToGenerator(regeneratorRuntime.mark(function _callee16(req, res) {\n        var token, _password2, response;\n\n        return regeneratorRuntime.wrap(function _callee16$(_context16) {\n            while (1) {\n                switch (_context16.prev = _context16.next) {\n                    case 0:\n                        token = req.body.token;\n\n                        if (!(req.body.password === req.body.password2)) {\n                            _context16.next = 10;\n                            break;\n                        }\n\n                        _password2 = req.body.password;\n                        _context16.next = 5;\n                        return changePasswordHlp(token, _password2);\n\n                    case 5:\n                        response = _context16.sent;\n\n                        console.log(response);\n                        try {\n                            console.log(response);\n                            res.setHeader('Content-Type', 'application/json');\n                            res.send(response);\n                        } catch (err) {\n                            console.log(err);\n                            console.error(err);\n                            res.setHeader('Content-Type', 'application/json');\n                            res.send(JSON.stringify(response));\n                        }\n                        _context16.next = 12;\n                        break;\n\n                    case 10:\n                        res.setHeader('Content-Type', 'application/json');\n                        res.send({ success: false, message: \"Passwords didn't match\" });\n\n                    case 12:\n                    case 'end':\n                        return _context16.stop();\n                }\n            }\n        }, _callee16, this);\n    }));\n\n    return function changePassword(_x33, _x34) {\n        return _ref16.apply(this, arguments);\n    };\n}();\n\nvar requireNewPassword = function () {\n    var _ref17 = _asyncToGenerator(regeneratorRuntime.mark(function _callee17(email) {\n        var myToken, db, user, mailOptions;\n        return regeneratorRuntime.wrap(function _callee17$(_context17) {\n            while (1) {\n                switch (_context17.prev = _context17.next) {\n                    case 0:\n                        //this methods sends an email with a temporary link for the user to create a new password\n                        myToken = _jsonwebtoken2.default.sign({ email: email }, _credentials2.default.jwtSecret, { expiresIn: 900 });\n                        _context17.next = 3;\n                        return dbl.connect();\n\n                    case 3:\n                        db = _context17.sent;\n                        _context17.next = 6;\n                        return db.collection('users').findOne({ email: email });\n\n                    case 6:\n                        user = _context17.sent;\n                        _context17.prev = 7;\n\n                        if (!(!user || !user.firstName)) {\n                            _context17.next = 12;\n                            break;\n                        }\n\n                        return _context17.abrupt('return', { success: \"false\", message: \"User wasn't found\" });\n\n                    case 12:\n                        mailOptions = {\n                            from: '\"liveoption\" <customer-success@liveoption.io>', // sender address\n                            to: user.email, // list of receivers\n                            subject: 'Password reset requested on liveoption',\n                            html: '<b>Hello,</b></br><p>A password recovery procedure has been requested ' + 'in your name on liveoption.io. If you requested a new password, please' + ' click on the following link to proceed.</p>' + '<a href=\"http://www.liveoption.io/change_password?token=' + myToken + '\">Change my password now</a>' + '<p>If you didn\\'t request a password reset, please disregard this email</p>' // html body\n                        };\n                        _context17.next = 15;\n                        return transporter.sendMail(mailOptions);\n\n                    case 15:\n                        return _context17.abrupt('return', _context17.sent);\n\n                    case 16:\n                        _context17.next = 21;\n                        break;\n\n                    case 18:\n                        _context17.prev = 18;\n                        _context17.t0 = _context17['catch'](7);\n\n                        console.log(_context17.t0);\n\n                    case 21:\n                        _context17.prev = 21;\n\n                        db.close();\n                        return _context17.finish(21);\n\n                    case 24:\n                    case 'end':\n                        return _context17.stop();\n                }\n            }\n        }, _callee17, this, [[7, 18, 21, 24]]);\n    }));\n\n    return function requireNewPassword(_x35) {\n        return _ref17.apply(this, arguments);\n    };\n}();\n\nvar retrievePassword = function () {\n    var _ref18 = _asyncToGenerator(regeneratorRuntime.mark(function _callee18(req, res) {\n        var email, response;\n        return regeneratorRuntime.wrap(function _callee18$(_context18) {\n            while (1) {\n                switch (_context18.prev = _context18.next) {\n                    case 0:\n                        email = req.body.email;\n                        _context18.next = 3;\n                        return requireNewPassword(email, res);\n\n                    case 3:\n                        response = _context18.sent;\n\n                        try {\n                            console.log(response);\n                            res.setHeader('Content-Type', 'application/json');\n                            res.send(response);\n                            console.log(response);\n                        } catch (err) {\n                            console.error(err);\n                        }\n\n                    case 5:\n                    case 'end':\n                        return _context18.stop();\n                }\n            }\n        }, _callee18, this);\n    }));\n\n    return function retrievePassword(_x36, _x37) {\n        return _ref18.apply(this, arguments);\n    };\n}();\n\nvar Delete = function () {\n    var _ref19 = _asyncToGenerator(regeneratorRuntime.mark(function _callee20(req, res) {\n        var returnValue;\n        return regeneratorRuntime.wrap(function _callee20$(_context20) {\n            while (1) {\n                switch (_context20.prev = _context20.next) {\n                    case 0:\n                        login = req.body.login;\n                        password = req.body.password;\n                        fingerprint = req.body.fingerprint;\n                        returnValue = null;\n                        //this methods allow deletion of a user account after validating password\n\n                        _context20.next = 6;\n                        return authenticate(login, password, '', fingerprint, function () {\n                            var _ref20 = _asyncToGenerator(regeneratorRuntime.mark(function _callee19(err, ret) {\n                                var db, status;\n                                return regeneratorRuntime.wrap(function _callee19$(_context19) {\n                                    while (1) {\n                                        switch (_context19.prev = _context19.next) {\n                                            case 0:\n                                                if (!ret.auth.success) {\n                                                    _context19.next = 10;\n                                                    break;\n                                                }\n\n                                                _context19.next = 3;\n                                                return dbl.connect();\n\n                                            case 3:\n                                                db = _context19.sent;\n                                                _context19.next = 6;\n                                                return db.collection('users').updateOne({ login: \"login\" }, { $set: { active: false } });\n\n                                            case 6:\n                                                status = _context19.sent;\n\n                                                try {\n                                                    returnValue = status;\n                                                } catch (err) {\n                                                    console.error(err);\n                                                    returnValue = { success: false, state: \"error\", message: _errno_code2.default.DELETE_ERROR };\n                                                } finally {\n                                                    db.close();\n                                                }\n                                                _context19.next = 11;\n                                                break;\n\n                                            case 10:\n                                                retrunValue = { success: false, state: \"error\", message: _errno_code2.default.DELETE_ERROR };\n\n                                            case 11:\n                                            case 'end':\n                                                return _context19.stop();\n                                        }\n                                    }\n                                }, _callee19, this);\n                            }));\n\n                            return function (_x40, _x41) {\n                                return _ref20.apply(this, arguments);\n                            };\n                        }());\n\n                    case 6:\n                        res.setHeader('Content-Type', 'application/json');\n                        res.send(JSON.stringify(returnValue));\n\n                    case 8:\n                    case 'end':\n                        return _context20.stop();\n                }\n            }\n        }, _callee20, this);\n    }));\n\n    return function Delete(_x38, _x39) {\n        return _ref19.apply(this, arguments);\n    };\n}();\n\nvar renderForm = function () {\n    var _ref21 = _asyncToGenerator(regeneratorRuntime.mark(function _callee21(req, res) {\n        var db, response;\n        return regeneratorRuntime.wrap(function _callee21$(_context21) {\n            while (1) {\n                switch (_context21.prev = _context21.next) {\n                    case 0:\n                        _context21.next = 2;\n                        return dbl.connect();\n\n                    case 2:\n                        db = _context21.sent;\n                        _context21.next = 5;\n                        return db.collection('profileItems').find();\n\n                    case 5:\n                        response = _context21.sent;\n\n                        try {\n                            res.send(response);\n                        } finally {\n                            db.close();\n                        }\n\n                    case 7:\n                    case 'end':\n                        return _context21.stop();\n                }\n            }\n        }, _callee21, this);\n    }));\n\n    return function renderForm(_x42, _x43) {\n        return _ref21.apply(this, arguments);\n    };\n}();\n\nvar create = function () {\n    var _ref22 = _asyncToGenerator(regeneratorRuntime.mark(function _callee22(req, res) {\n        var user, errors, emailProp, loginProp, passwordProp, db;\n        return regeneratorRuntime.wrap(function _callee22$(_context22) {\n            while (1) {\n                switch (_context22.prev = _context22.next) {\n                    case 0:\n                        user = {};\n                        errors = [];\n                        _context22.next = 4;\n                        return checkEmailHlp(req.body.email);\n\n                    case 4:\n                        emailProp = _context22.sent;\n                        _context22.next = 7;\n                        return checkLoginHlp(req.body.login);\n\n                    case 7:\n                        loginProp = _context22.sent;\n                        _context22.next = 10;\n                        return checkPass(req.body.password, req.body.password2);\n\n                    case 10:\n                        passwordProp = _context22.sent;\n\n\n                        if (emailProp.valid) {\n                            user.email = emailProp.email;\n                        } else errors.push(emailProp.message) && console.log(\"email error logged\");\n                        if (loginProp.valid) {\n                            user.login = loginProp.login;\n                        } else errors.push(loginProp.message) && console.log(\"login error logged\");\n                        if (passwordProp.valid) {\n                            user.password = passwordProp.password;\n                        } else errors.push(passwordProp.message) && console.log(\"password error logged\");\n\n                        if (!(errors.length == 0)) {\n                            _context22.next = 26;\n                            break;\n                        }\n\n                        _context22.next = 17;\n                        return dbl.connect();\n\n                    case 17:\n                        db = _context22.sent;\n                        _context22.next = 20;\n                        return db.collection('users').insertOne(user);\n\n                    case 20:\n                        try {\n                            console.log(\"success\");\n                        } finally {\n                            db.close();\n                        }\n                        _context22.next = 23;\n                        return validateAccount(email);\n\n                    case 23:\n                        res.send({ success: true, message: \"User created, please check your emails\" });\n                        _context22.next = 27;\n                        break;\n\n                    case 26:\n                        res.send({ success: false, message: \"Your account couldn't be created\", errors: errors });\n\n                    case 27:\n                    case 'end':\n                        return _context22.stop();\n                }\n            }\n        }, _callee22, this);\n    }));\n\n    return function create(_x44, _x45) {\n        return _ref22.apply(this, arguments);\n    };\n}(); //this method adds a new user to the database\n\nvar reactivate = function () {\n    var _ref23 = _asyncToGenerator(regeneratorRuntime.mark(function _callee23(req, res) {\n        var login, password, db, user, myToken, mailOptions;\n        return regeneratorRuntime.wrap(function _callee23$(_context23) {\n            while (1) {\n                switch (_context23.prev = _context23.next) {\n                    case 0:\n                        login = req.body.login;\n                        password = req.body.password;\n                        _context23.next = 4;\n                        return dbl.connect();\n\n                    case 4:\n                        db = _context23.sent;\n                        _context23.prev = 5;\n                        _context23.next = 8;\n                        return db.collection('users').findOneAndUpdate({ login: login, password: password, active: false }, { $set: { active: true } });\n\n                    case 8:\n                        user = _context23.sent;\n\n                        console.log(user);\n\n                        if (!(user.nModified != 1)) {\n                            _context23.next = 15;\n                            break;\n                        }\n\n                        console.log(\"error\");\n                        res.send({ success: false, message: _errno_code2.default.REACTIVATION_ERROR });\n                        _context23.next = 21;\n                        break;\n\n                    case 15:\n                        myToken = _jsonwebtoken2.default.sign({ email: user.email }, _credentials2.default.jwtSecret, { expiresIn: 9000 }), mailOptions = {\n                            from: '\"liveoption\" <customer-success@liveoption.io>', // sender address\n                            to: user.email, // list of receivers\n                            subject: 'Your account has been reactivated',\n                            html: '<b>Hello,</b></br><p>Your liveoption account has just been reactivated.' + 'If you did not request the reactivation of your liveoption account, <a href=\"' + req.get('host') + '/\">please click here.</a></p>' + '<p>Thank you,</p><p>See you soon !</p>'\n                        }; // html body\n\n                        _context23.t0 = res;\n                        _context23.next = 19;\n                        return transporter.sendMail(mailOptions);\n\n                    case 19:\n                        _context23.t1 = _context23.sent;\n\n                        _context23.t0.send.call(_context23.t0, _context23.t1);\n\n                    case 21:\n                        _context23.prev = 21;\n\n                        db.close();\n                        return _context23.finish(21);\n\n                    case 24:\n                    case 'end':\n                        return _context23.stop();\n                }\n            }\n        }, _callee23, this, [[5,, 21, 24]]);\n    }));\n\n    return function reactivate(_x46, _x47) {\n        return _ref23.apply(this, arguments);\n    };\n}(); //this method reactivates a previously desactivated account\n\nvar validateAccount = function () {\n    var _ref24 = _asyncToGenerator(regeneratorRuntime.mark(function _callee24(email) {\n        var myToken, mailOptions;\n        return regeneratorRuntime.wrap(function _callee24$(_context24) {\n            while (1) {\n                switch (_context24.prev = _context24.next) {\n                    case 0:\n                        myToken = _jsonwebtoken2.default.sign({ email: email }, _credentials2.default.jwtSecret, { expiresIn: 900 });\n                        mailOptions = {\n                            from: '\"liveoption\" <customer-success@liveoption.io>', // sender address\n                            to: email, // list of receivers\n                            subject: 'Pleasee verify your liveoption account',\n                            html: '<b>Hello,</b></br><p>You just created a liveoption account. Please click the following link within the next 15mins. to verify your email address.</p>' + '<a href=\"http://www.liveoption.io/account/validate?token=' + myToken + '\">Validate account now</a>' + '<p>Thank you for registering liveoption,</p><p>See you soon !</p>' // html body\n                        };\n                        _context24.next = 4;\n                        return transporter.sendMail(mailOptions);\n\n                    case 4:\n                        return _context24.abrupt('return', _context24.sent);\n\n                    case 5:\n                    case 'end':\n                        return _context24.stop();\n                }\n            }\n        }, _callee24, this);\n    }));\n\n    return function validateAccount(_x48) {\n        return _ref24.apply(this, arguments);\n    };\n}();\n\nvar isVerified = function () {\n    var _ref25 = _asyncToGenerator(regeneratorRuntime.mark(function _callee25(res, req) {\n        var email, db;\n        return regeneratorRuntime.wrap(function _callee25$(_context25) {\n            while (1) {\n                switch (_context25.prev = _context25.next) {\n                    case 0:\n                        //this method makes sure the user has authorized his account via email\n                        email = req.user.email;\n                        _context25.next = 3;\n                        return dbl.connect();\n\n                    case 3:\n                        db = _context25.sent;\n\n                        try {\n                            db.collection('users').updateOne({ email: email }, { $set: { active: true } });\n                        } finally {\n                            db.close();\n                        }\n                        res.json({ success: true, message: _errno_code2.default.ACCOUNT_VALIDATED_INFO });\n\n                    case 6:\n                    case 'end':\n                        return _context25.stop();\n                }\n            }\n        }, _callee25, this);\n    }));\n\n    return function isVerified(_x49, _x50) {\n        return _ref25.apply(this, arguments);\n    };\n}();\n\nvar updateProfile = function () {\n    var _ref26 = _asyncToGenerator(regeneratorRuntime.mark(function _callee26(req, res) {\n        var db, payload, _login;\n\n        return regeneratorRuntime.wrap(function _callee26$(_context26) {\n            while (1) {\n                switch (_context26.prev = _context26.next) {\n                    case 0:\n                        _context26.next = 2;\n                        return dbl.connect();\n\n                    case 2:\n                        db = _context26.sent;\n                        _context26.prev = 3;\n                        payload = req.body;\n                        _login = req.user.username;\n\n                        addTag(payload.tags);\n                        delete payload.tags;\n                        _context26.next = 10;\n                        return db.collection('users').updateOne({ login: _login }, { $set: payload });\n\n                    case 10:\n                        res.send({ success: true, message: _errno_code2.default.PROFILE_UPDATED_INFO });\n\n                    case 11:\n                        _context26.prev = 11;\n\n                        db.close();\n                        return _context26.finish(11);\n\n                    case 14:\n                    case 'end':\n                        return _context26.stop();\n                }\n            }\n        }, _callee26, this, [[3,, 11, 14]]);\n    }));\n\n    return function updateProfile(_x51, _x52) {\n        return _ref26.apply(this, arguments);\n    };\n}();\n\nvar tags = function () {\n    var _ref27 = _asyncToGenerator(regeneratorRuntime.mark(function _callee27(req, res) {\n        var db, response;\n        return regeneratorRuntime.wrap(function _callee27$(_context27) {\n            while (1) {\n                switch (_context27.prev = _context27.next) {\n                    case 0:\n                        _context27.next = 2;\n                        return dbl.connect();\n\n                    case 2:\n                        db = _context27.sent;\n                        _context27.next = 5;\n                        return db.colletion('tags').find().sort({ count: desc });\n\n                    case 5:\n                        response = _context27.sent;\n\n                        res.send({ response: response });\n\n                    case 7:\n                    case 'end':\n                        return _context27.stop();\n                }\n            }\n        }, _callee27, this);\n    }));\n\n    return function tags(_x53, _x54) {\n        return _ref27.apply(this, arguments);\n    };\n}();\n\nvar addTag = function () {\n    var _ref28 = _asyncToGenerator(regeneratorRuntime.mark(function _callee30(tags) {\n        var db;\n        return regeneratorRuntime.wrap(function _callee30$(_context30) {\n            while (1) {\n                switch (_context30.prev = _context30.next) {\n                    case 0:\n                        _context30.next = 2;\n                        return tags;\n\n                    case 2:\n                        _context30.t0 = _context30.sent;\n\n                        if (!(_context30.t0 === '')) {\n                            _context30.next = 5;\n                            break;\n                        }\n\n                        console.log({ status: \"ok\", tagsCreated: 0 });\n\n                    case 5:\n                        _context30.next = 7;\n                        return dbl.connect();\n\n                    case 7:\n                        db = _context30.sent;\n                        _context30.prev = 8;\n                        _context30.next = 11;\n                        return _asyncToGenerator(regeneratorRuntime.mark(function _callee29() {\n                            var bulk, result;\n                            return regeneratorRuntime.wrap(function _callee29$(_context29) {\n                                while (1) {\n                                    switch (_context29.prev = _context29.next) {\n                                        case 0:\n                                            _context29.next = 2;\n                                            return db.collection('tags').initializeUnorderedBulkOp();\n\n                                        case 2:\n                                            bulk = _context29.sent;\n                                            _context29.next = 5;\n                                            return req.body.tags.filter(function (n) {\n                                                return n != '';\n                                            }).forEach(function () {\n                                                var _ref30 = _asyncToGenerator(regeneratorRuntime.mark(function _callee28(n) {\n                                                    return regeneratorRuntime.wrap(function _callee28$(_context28) {\n                                                        while (1) {\n                                                            switch (_context28.prev = _context28.next) {\n                                                                case 0:\n                                                                    bulk.find({ label: n }).upsert().updateOne({ $inc: { count: 1 } });\n\n                                                                case 1:\n                                                                case 'end':\n                                                                    return _context28.stop();\n                                                            }\n                                                        }\n                                                    }, _callee28, this);\n                                                }));\n\n                                                return function (_x56) {\n                                                    return _ref30.apply(this, arguments);\n                                                };\n                                            }());\n\n                                        case 5:\n                                            _context29.next = 7;\n                                            return bulk.execute({ w: 1 });\n\n                                        case 7:\n                                            result = _context29.sent;\n\n                                            console.error(result);\n\n                                        case 9:\n                                        case 'end':\n                                            return _context29.stop();\n                                    }\n                                }\n                            }, _callee29, this);\n                        }))();\n\n                    case 11:\n                        _context30.prev = 11;\n\n                        db.close();\n                        return _context30.finish(11);\n\n                    case 14:\n                    case 'end':\n                        return _context30.stop();\n                }\n            }\n        }, _callee30, this, [[8,, 11, 14]]);\n    }));\n\n    return function addTag(_x55) {\n        return _ref28.apply(this, arguments);\n    };\n}();\n\nvar viewAll = function () {\n    var _ref31 = _asyncToGenerator(regeneratorRuntime.mark(function _callee31(res, req) {\n        return regeneratorRuntime.wrap(function _callee31$(_context31) {\n            while (1) {\n                switch (_context31.prev = _context31.next) {\n                    case 0:\n                        res.send({ message: \"OK\" });\n\n                    case 1:\n                    case 'end':\n                        return _context31.stop();\n                }\n            }\n        }, _callee31, this);\n    }));\n\n    return function viewAll(_x57, _x58) {\n        return _ref31.apply(this, arguments);\n    };\n}();\n\n//# sourceMappingURL=user-compiled.js.map\n\n//# sourceMappingURL=user-compiled-compiled.js.map\n\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.userLogin = userLogin;\nexports.checkLogin = checkLogin;\nexports.checkEmail = checkEmail;\nexports.changePassword = changePassword;\nexports.retrievePassword = retrievePassword;\nexports.Delete = Delete;\nexports.renderForm = renderForm;\nexports.create = create;\nexports.reactivate = reactivate;\nexports.isVerified = isVerified;\nexports.updateProfile = updateProfile;\nexports.tags = tags;\nexports.addTag = addTag;\nexports.viewAll = viewAll;\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _expressSession = require('express-session');\n\nvar _expressSession2 = _interopRequireDefault(_expressSession);\n\nvar _bcrypt = require('bcrypt');\n\nvar _bcrypt2 = _interopRequireDefault(_bcrypt);\n\nvar _dbConnect = require('./dbConnect');\n\nvar dbl = _interopRequireWildcard(_dbConnect);\n\nvar _credentials = require('../credentials');\n\nvar _credentials2 = _interopRequireDefault(_credentials);\n\nvar _mongodb = require('mongodb');\n\nvar _mongodb2 = _interopRequireDefault(_mongodb);\n\nvar _jsonwebtoken = require('jsonwebtoken');\n\nvar _jsonwebtoken2 = _interopRequireDefault(_jsonwebtoken);\n\nvar _nodemailer = require('nodemailer');\n\nvar _nodemailer2 = _interopRequireDefault(_nodemailer);\n\nvar _errno_code = require('./errno_code');\n\nvar _errno_code2 = _interopRequireDefault(_errno_code);\n\nvar _match = require('../model/match');\n\nvar _match2 = _interopRequireDefault(_match);\n\nfunction _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n        return obj;\n    } else {\n        var newObj = {};if (obj != null) {\n            for (var key in obj) {\n                if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n            }\n        }newObj.default = obj;return newObj;\n    }\n}\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\n// ************************************************************************** //\n//                                                                            //\n//                                                        :::      ::::::::   //\n//   user.js                                            :+:      :+:    :+:   //\n//                                                    +:+ +:+         +:+     //\n//   By: opichou <marvin@42.fr>                     +#+  +:+       +#+        //\n//                                                +#+#+#+#+#+   +#+           //\n//   Created: 2016/09/19 18:27:53 by opichou           #+#    #+#             //\n//   Updated: 2016/09/29 18:27:53 by opichou          ###   ########.fr       //\n//                                                                            //\n// ************************************************************************** //\n\nvar saltRounds = 10;\n\nvar transporter = _nodemailer2.default.createTransport('smtps://apimatcha@gmail.com:apiMatcha1212@smtp.gmail.com');\n\nfunction now() {\n    var currentdate = new Date();\n    return currentdate.getDay() + \"/\" + currentdate.getMonth() + \"/\" + currentdate.getFullYear() + \" @ \" + currentdate.getHours() + \":\" + currentdate.getMinutes() + \":\" + currentdate.getSeconds();\n}\n\nfunction contains(a, obj) {\n    for (var i = 0; i < a.length; i++) {\n        if (a[i] === obj) {\n            return true;\n        }\n    }\n    return false;\n}\n\n//# sourceMappingURL=user-compiled-compiled-compiled.js.map"]}