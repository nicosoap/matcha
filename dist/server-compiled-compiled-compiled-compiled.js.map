{"version":3,"sources":["server-compiled-compiled-compiled.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,WAAW,QAAQ,SAAR,CAAf;;AAEA,IAAI,YAAY,uBAAuB,QAAvB,CAAhB;;AAEA,IAAI,QAAQ,QAAQ,MAAR,CAAZ;;AAEA,IAAI,SAAS,uBAAuB,KAAvB,CAAb;;AAEA,IAAI,MAAM,QAAQ,IAAR,CAAV;;AAEA,IAAI,OAAO,uBAAuB,GAAvB,CAAX;;AAEA,IAAI,YAAY,QAAQ,UAAR,CAAhB;;AAEA,IAAI,aAAa,uBAAuB,SAAvB,CAAjB;;AAEA,IAAI,cAAc,QAAQ,aAAR,CAAlB;;AAEA,IAAI,eAAe,uBAAuB,WAAvB,CAAnB;;AAEA,IAAI,kBAAkB,QAAQ,iBAAR,CAAtB;;AAEA,IAAI,mBAAmB,uBAAuB,eAAvB,CAAvB;;AAEA,IAAI,QAAQ,QAAQ,oBAAR,CAAZ;;AAEA,IAAI,OAAO,wBAAwB,KAAxB,CAAX;;AAEA,IAAI,WAAW,QAAQ,uBAAR,CAAf;;AAEA,IAAI,UAAU,wBAAwB,QAAxB,CAAd;;AAEA,IAAI,gBAAgB,QAAQ,4BAAR,CAApB;;AAEA,IAAI,iBAAiB,uBAAuB,aAAvB,CAArB;;AAEA,IAAI,SAAS,QAAQ,qBAAR,CAAb;;AAEA,IAAI,QAAQ,wBAAwB,MAAxB,CAAZ;;AAEA,IAAI,eAAe,QAAQ,eAAR,CAAnB;;AAEA,IAAI,gBAAgB,uBAAuB,YAAvB,CAApB;;AAEA,IAAI,cAAc,QAAQ,YAAR,CAAlB;;AAEA,IAAI,eAAe,uBAAuB,WAAvB,CAAnB;;AAEA,IAAI,cAAc,QAAQ,aAAR,CAAlB;;AAEA,IAAI,eAAe,uBAAuB,WAAvB,CAAnB;;AAEA,IAAI,UAAU,QAAQ,QAAR,CAAd;;AAEA,IAAI,WAAW,uBAAuB,OAAvB,CAAf;;AAEA,IAAI,UAAU,QAAQ,WAAR,CAAd;;AAEA,IAAI,WAAW,uBAAuB,OAAvB,CAAf;;AAEA,IAAI,QAAQ,QAAQ,MAAR,CAAZ;;AAEA,IAAI,SAAS,uBAAuB,KAAvB,CAAb;;AAEA,IAAI,WAAW,QAAQ,SAAR,CAAf;;AAEA,IAAI,YAAY,uBAAuB,QAAvB,CAAhB;;AAEA,IAAI,wBAAwB,QAAQ,wBAAR,CAA5B;;AAEA,IAAI,yBAAyB,uBAAuB,qBAAvB,CAA7B;;AAEA,IAAI,iBAAiB,QAAQ,sBAAR,CAArB;;AAEA,IAAI,kBAAkB,uBAAuB,cAAvB,CAAtB;;AAEA,SAAS,uBAAT,CAAiC,GAAjC,EAAsC;AAClC,QAAI,OAAO,IAAI,UAAf,EAA2B;AACvB,eAAO,GAAP;AACH,KAFD,MAEO;AACH,YAAI,SAAS,EAAb,CAAgB,IAAI,OAAO,IAAX,EAAiB;AAC7B,iBAAK,IAAI,GAAT,IAAgB,GAAhB,EAAqB;AACjB,oBAAI,OAAO,SAAP,CAAiB,cAAjB,CAAgC,IAAhC,CAAqC,GAArC,EAA0C,GAA1C,CAAJ,EAAoD,OAAO,GAAP,IAAc,IAAI,GAAJ,CAAd;AACvD;AACJ,gBAAO,OAAP,GAAiB,GAAjB,CAAqB,OAAO,MAAP;AACzB;AACJ;;AAED,SAAS,sBAAT,CAAgC,GAAhC,EAAqC;AACjC,WAAO,OAAO,IAAI,UAAX,GAAwB,GAAxB,GAA8B,EAAE,SAAS,GAAX,EAArC;AACH;;AAED,IAAI,MAAM,CAAC,GAAG,UAAU,OAAd,GAAV,C,CAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI,SAAS,OAAO,OAAP,CAAe,YAAf,CAA4B,GAA5B,CAAb;AACA,IAAI,KAAK,CAAC,GAAG,SAAS,OAAb,EAAsB,MAAtB,CAAT;AACA,IAAI,SAAS,CAAC,GAAG,SAAS,OAAb,EAAsB,EAAE,MAAM,YAAY,UAApB,EAAtB,CAAb;;AAEA,IAAI,OAAJ,CAAY,aAAZ;AACA,IAAI,GAAJ,CAAQ,QAAQ,eAAR,EAAyB,cAAc,OAAd,CAAsB,YAA/C,CAAR;AACA,IAAI,GAAJ,CAAQ,CAAC,GAAG,iBAAiB,OAArB,EAA8B;AAClC,YAAQ,KAD0B;AAElC,uBAAmB,IAFe;AAGlC,YAAQ,cAAc,OAAd,CAAsB;;AAHI,CAA9B,CAAR;AAMA,IAAI,GAAJ,CAAQ,MAAR,EAAgB,QAAQ,GAAR,CAAY,IAAZ,IAAoB,IAApC;AACA,IAAI,GAAJ,CAAQ,UAAU,OAAV,CAAkB,MAAlB,CAAyB,YAAY,SAArC,CAAR;AACA,IAAI,GAAJ,CAAQ,CAAC,GAAG,uBAAuB,OAA3B,EAAoC,CAAC,GAAG,UAAU,OAAd,EAAuB,gBAAgB,OAAvC,CAApC,CAAR;AACA,IAAI,GAAJ,CAAQ,aAAa,OAAb,CAAqB,IAArB,EAAR;AACA,IAAI,GAAJ,CAAQ,aAAa,OAAb,CAAqB,UAArB,CAAgC;AACpC,cAAU;AAD0B,CAAhC,CAAR;AAGA,IAAI,GAAJ,CAAQ,CAAC,GAAG,aAAa,OAAjB,EAA0B,EAAE,QAAQ,cAAc,OAAd,CAAsB,SAAhC,EAA1B,EAAuE,MAAvE,CAA8E;AAClF,UAAM,CAAC,QAAD,EAAW,oBAAX,EAAiC,mBAAjC,EAAsD,WAAtD,EAAmE,YAAnE,EAAiF,UAAjF,CAD4E,EAA9E,CAAR;;AAGA;;AAEA,IAAI,GAAJ,CAAQ,GAAR,EAAa,UAAU,GAAV,EAAe,GAAf,EAAoB;AAC7B,QAAI,IAAJ,CAAS,kBAAT;AACH,CAFD;AAGA,IAAI,GAAJ,CAAQ,QAAR,EAAkB,UAAU,CAAV,EAAa,GAAb,EAAkB;AAChC,WAAO,IAAI,IAAJ,CAAS,YAAT,CAAP;AACH,CAFD;AAGA,IAAI,IAAJ,CAAS,QAAT,EAAmB,KAAK,SAAxB;AACA,IAAI,GAAJ,CAAQ,OAAR,EAAiB,KAAK,OAAtB;AACA,IAAI,GAAJ,CAAQ,OAAR,EAAiB,KAAK,aAAtB;AACA,IAAI,IAAJ,CAAS,UAAT,EAAqB,OAAO,MAAP,CAAc,SAAd,CAArB,EAA+C,QAAQ,aAAvD;AACA,IAAI,IAAJ,CAAS,iBAAT,EAA4B,QAAQ,SAApC;AACA,IAAI,IAAJ,CAAS,WAAT,EAAsB,KAAK,MAA3B;AACA,IAAI,IAAJ,CAAS,cAAT,EAAyB,KAAK,aAA9B;AACA,IAAI,GAAJ,CAAQ,YAAR,EAAsB,KAAK,IAA3B;AACA,IAAI,IAAJ,CAAS,YAAT,EAAuB,KAAK,MAA5B;AACA,IAAI,GAAJ,CAAQ,oBAAR,EAA8B,KAAK,UAAnC;AACA,IAAI,GAAJ,CAAQ,oBAAR,EAA8B,KAAK,UAAnC;AACA,IAAI,GAAJ,CAAQ,mBAAR,EAA6B,KAAK,UAAlC;AACA,IAAI,IAAJ,CAAS,0BAAT,EAAqC,KAAK,cAA1C;AACA,IAAI,IAAJ,CAAS,4BAAT,EAAuC,KAAK,gBAA5C;AACA,IAAI,IAAJ,CAAS,mBAAT,EAA8B,KAAK,UAAnC;AACA,IAAI,IAAJ,CAAS,qBAAT,EAAgC,KAAK,UAArC;AACA,IAAI,IAAJ,CAAS,iBAAT,EAA4B,KAAK,MAAjC;AACA,IAAI,IAAJ,CAAS,kBAAT,EAA6B,MAAM,YAAnC;AACA;;AAEA,GAAG,EAAH,CAAM,YAAN,EAAoB,UAAU,MAAV,EAAkB;AAClC,WAAO,EAAP,CAAU,SAAV,EAAqB,UAAU,IAAV,EAAgB;AACjC,eAAO,SAAP,CAAiB,IAAjB,CAAsB,SAAtB,EAAiC;AAC7B,kBAAM,IADuB;AAE7B,kBAAM,OAAO,EAAP,CAAU,KAAV,CAAgB,CAAhB;AAFuB,SAAjC;AAIH,KALD;AAMH,CAPD;;AASA,IAAI,GAAJ,CAAQ,UAAU,GAAV,EAAe,GAAf,EAAoB,GAApB,EAAyB,IAAzB,EAA+B;AACnC,QAAI,IAAI,IAAJ,KAAa,mBAAjB,EAAsC;AAClC,YAAI,QAAJ,CAAa,QAAb;AACH;AACJ,CAJD;AAKA,IAAI,GAAJ,CAAQ,UAAU,GAAV,EAAe,GAAf,EAAoB;AACxB,QAAI,IAAJ,CAAS,WAAT;AACA,QAAI,MAAJ,CAAW,GAAX;AACA,QAAI,IAAJ,CAAS,gBAAT;AACH,CAJD;AAKA,IAAI,GAAJ,CAAQ,UAAU,GAAV,EAAe,GAAf,EAAoB,GAApB,EAAyB;AAC7B,YAAQ,KAAR,CAAc,IAAI,KAAlB;AACA,QAAI,MAAJ,CAAW,GAAX;AACA,QAAI,IAAJ,CAAS,gBAAT;AACH,CAJD;AAKA,OAAO,MAAP,CAAc,IAAI,GAAJ,CAAQ,MAAR,CAAd,EAA+B,YAAY;AACvC,YAAQ,GAAR,CAAY,yCAAyC,IAAI,GAAJ,CAAQ,MAAR,CAAzC,GAA2D,4BAAvE;AACH,CAFD;;AAIA;;AAEA;;AAEA","file":"server-compiled-compiled-compiled-compiled.js","sourcesContent":["'use strict';\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _http = require('http');\n\nvar _http2 = _interopRequireDefault(_http);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _parseurl = require('parseurl');\n\nvar _parseurl2 = _interopRequireDefault(_parseurl);\n\nvar _bodyParser = require('body-parser');\n\nvar _bodyParser2 = _interopRequireDefault(_bodyParser);\n\nvar _expressSession = require('express-session');\n\nvar _expressSession2 = _interopRequireDefault(_expressSession);\n\nvar _user = require('./controllers/user');\n\nvar user = _interopRequireWildcard(_user);\n\nvar _picture = require('./controllers/picture');\n\nvar picture = _interopRequireWildcard(_picture);\n\nvar _interactions = require('./controllers/interactions');\n\nvar _interactions2 = _interopRequireDefault(_interactions);\n\nvar _admin = require('./controllers/admin');\n\nvar admin = _interopRequireWildcard(_admin);\n\nvar _credentials = require('./credentials');\n\nvar _credentials2 = _interopRequireDefault(_credentials);\n\nvar _nodemailer = require('nodemailer');\n\nvar _nodemailer2 = _interopRequireDefault(_nodemailer);\n\nvar _expressJwt = require('express-jwt');\n\nvar _expressJwt2 = _interopRequireDefault(_expressJwt);\n\nvar _multer = require('multer');\n\nvar _multer2 = _interopRequireDefault(_multer);\n\nvar _socket = require('socket.io');\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _webpack = require('webpack');\n\nvar _webpack2 = _interopRequireDefault(_webpack);\n\nvar _webpackDevMiddleware = require('webpack-dev-middleware');\n\nvar _webpackDevMiddleware2 = _interopRequireDefault(_webpackDevMiddleware);\n\nvar _webpackConfig = require('../webpack.config.js');\n\nvar _webpackConfig2 = _interopRequireDefault(_webpackConfig);\n\nfunction _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n        return obj;\n    } else {\n        var newObj = {};if (obj != null) {\n            for (var key in obj) {\n                if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n            }\n        }newObj.default = obj;return newObj;\n    }\n}\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar app = (0, _express2.default)(); // ************************************************************************** //\n//                                                                            //\n//                                                        :::      ::::::::   //\n//   server.js                                          :+:      :+:    :+:   //\n//                                                    +:+ +:+         +:+     //\n//   By: opichou <opichou@student.42.fr>            +#+  +:+       +#+        //\n//                                                +#+#+#+#+#+   +#+           //\n//   Created: 2016/09/01 18:27:53 by opichou           #+#    #+#             //\n//   Updated: 2016/09/29 18:27:53 by opichou          ###   ########.fr       //\n//                                                                            //\n// ************************************************************************** //\n\nvar server = _http2.default.createServer(app);\nvar io = (0, _socket2.default)(server);\nvar upload = (0, _multer2.default)({ dest: __dirname + '/uploads' });\n\napp.disable('X-Powerd-By');\napp.use(require('cookie-parser')(_credentials2.default.cookieSecret));\napp.use((0, _expressSession2.default)({\n    resave: false,\n    saveUninitialized: true,\n    secret: _credentials2.default.cookieSecret\n\n}));\napp.set('port', process.env.PORT || 8081);\napp.use(_express2.default.static(__dirname + '/public'));\napp.use((0, _webpackDevMiddleware2.default)((0, _webpack2.default)(_webpackConfig2.default)));\napp.use(_bodyParser2.default.json());\napp.use(_bodyParser2.default.urlencoded({\n    extended: true\n}));\napp.use((0, _expressJwt2.default)({ secret: _credentials2.default.jwtSecret }).unless({\n    path: ['/login', '/retrieve_password', '/activate_account', '/user/new', '/protected', /^\\/test/i] }));\n\n//--ROUTES--/ />\n\napp.get('/', function (req, res) {\n    res.send(\"Welcome dude !!!\");\n});\napp.get('/login', function (_, res) {\n    return res.send(\"Login Page\");\n});\napp.post('/login', user.userLogin);\napp.get('/user', user.viewAll);\napp.put('/user', user.updateProfile);\napp.post('/picture', upload.single('picture'), picture.uploadPicture);\napp.post('/picture/delete', picture.deleteOne);\napp.post('/user/new', user.create);\napp.post('/user/update', user.updateProfile);\napp.get('/user/tags', user.tags);\napp.post('/user/tags', user.addTag);\napp.get('/test/login/:login', user.checkLogin);\napp.get('/test/email/:email', user.checkEmail);\napp.get('/account/register', user.renderForm);\napp.post('/account/change_password', user.changePassword);\napp.post('/account/retrieve_password', user.retrievePassword);\napp.post('/account/activate', user.isVerified);\napp.post('/account/reactivate', user.reactivate);\napp.post('/account/delete', user.Delete);\napp.post('/admin/userform/', admin.addFormItems);\n//--ROUTES--/ />\n\nio.on('connection', function (socket) {\n    socket.on('message', function (body) {\n        socket.broadcast.emit('message', {\n            body: body,\n            from: socket.id.slice(8)\n        });\n    });\n});\n\napp.use(function (err, req, res, next) {\n    if (err.name === 'UnauthorizedError') {\n        res.redirect('/login');\n    }\n});\napp.use(function (req, res) {\n    res.type('text/html');\n    res.status(404);\n    res.send('Error 404 Page');\n});\napp.use(function (err, req, res) {\n    console.error(err.stack);\n    res.status(500);\n    res.send('Error 500 Page');\n});\nserver.listen(app.get('port'), function () {\n    console.log('Express started on http://localhost:' + app.get('port') + ' press Ctrl-C to terminate');\n});\n\n//# sourceMappingURL=server-compiled.js.map\n\n//# sourceMappingURL=server-compiled-compiled.js.map\n\n//# sourceMappingURL=server-compiled-compiled-compiled.js.map"]}